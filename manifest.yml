root: "/"

defaults:
  owner: root
  group: root
  fmode: 0644
  dmode: 0755

components:
  - src: bower_components/systemd-units/system/user@.service.d
    dst: etc/systemd/system/user@.service.d

  - src: bower_components/systemd-units/system/getty@tty6.service.d
    dst: etc/systemd/system/getty@tty6.service.d

config_files:
  - src: etc/mkinitcpio.conf
    packages: [ mkinitcpio ]

  - src: bower_components/archrc-private/etc/fstab
    dst: etc/fstab
    hosts: [ Gungnir, Gungnir-x60, Mimir ]

  - src: bower_components/archrc-private/etc/crypttab
    dst: etc/crypttab
    fmode: 0600
    hosts: [ Mimir ]

  - src: etc/default/grub
    packages: [ grub ]

  - src: etc/pacman.conf
    packages: [ pacman ]

  - src: etc/locale.gen
  - src: etc/locale.conf
  - src: etc/sysctl.d/99-sysctl.conf

  - src: etc/nftables.conf
    packages: [ nftables ]

  - src: etc/sudoers
    fmode: 0440
    packages: [ sudo ]

  - src: etc/ssh/sshd_config
    packages: [ openssh ]

  - src: bower_components/archrc-private/etc/ddclient/ddclient.conf
    dst: etc/ddclient/ddclient.conf
    fmode: 0600
    packages: [ ddclient ]

  - src: etc/udev/rules.d/99-lowbat.rules
    hosts: [ Gungnir, Gungnir-x60 ]

  - src: etc/modules-load.d/virtualbox.conf
    pacman: [ virtualbox ]

  - src: etc/modprobe.d/alsa-base.conf
    packages: [ linux-samus ]

  - src: etc/X11/xorg.conf.d/10-monitor.conf
    hosts: [ Mimir ]

  - src: etc/X11/xorg.conf.d/20-intel.conf
    packages: [ xf86-video-intel ]

  - src: etc/X11/xorg.conf.d/50-synaptics.conf
    packages: [ xf86-input-synaptics ]
    hosts: [ Gungnir ]

  - src: bower_components/systemd-units/logind.conf.d/acpi.conf
    dst: etc/systemd/logind.conf.d/acpi.conf

  - src: bower_components/systemd-units/coredump.conf.d/disable.conf
    dst: etc/systemd/coredump.conf.d/disable.conf

  - src: bower_components/systemd-units/system/numlock.service
    dst: etc/systemd/system/numlock.service

  - src: bower_components/systemd-units/system/slimlock@.service
    dst: etc/systemd/system/slimlock@.service
    packages: [ slimlock ]

  - src: etc/slim.conf
    packages: [ slimlock ]

  - src: bower_components/archutil/bin/archutil
    dst: usr/local/bin/archutil
    fmode: 0755

  - src: archutil.yml
    dst: usr/local/etc/archutil.yml

  - src: usr/local/bin/touchpad-toggle
    fmode: 0755
    packages: [ xf86-input-synaptics ]

  - src: usr/local/bin/chromeos-kbd_backlight
    fmode: 0755
    packages: [ linux-samus ]

  - src: usr/local/bin/chromeos-sound-output-toggle
    fmode: 0755
    packages: [ linux-samus ]

  - src: bower_components/archrc-private/usr/local/bin/mntxd
    dst: usr/local/bin/mntxd
    fmode: 0755
    hosts: [ Sleipnir ]

  # Only needed if starting xorg with systemd/User.
  # - src: etc/X11/Xwrapper.config
