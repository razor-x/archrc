root: "/"

defaults:
  owner: root
  group: root
  fmode: 0644
  dmode: 0755

components:
  - src: bower_components/systemd-units/system/user@.service.d
    dst: etc/systemd/system/user@.service.d

config_files:
  - src: etc/mkinitcpio.conf
    packages: [ mkinitcpio ]

  - src: bower_components/archrc-private/etc/fstab
    dst: etc/fstab

  - src: bower_components/archrc-private/refind/refind.conf
    dst: boot/efi/EFI/refind/refind.conf
    hosts: [ Sleipnir ]

  - src: bower_components/archrc-private/refind/refind_linux.conf
    dst: boot/refind_linux.conf
    hosts: [ Sleipnir ]

  - src: bower_components/archrc-private/loader/loader.conf
    dst: boot/efi/loader/loader.conf
    hosts: [ Frigg ]

  - src: bower_components/archrc-private/loader/entries/arch.conf
    dst: boot/efi/loader/entries/arch.conf
    hosts: [ Frigg ]

  - src: etc/default/grub
    packages: [ grub ]

  - src: bower_components/systemd-units/system/efistub-update@.path
    dst: etc/systemd/system/efistub-update@.path
    packages: [ efibootmgr ]

  - src: bower_components/systemd-units/system/efistub-update@.service
    dst: etc/systemd/system/efistub-update@.service
    packages: [ efibootmgr ]

  - src: bower_components/systemd-units/system/efistub-ucode-update@.path
    dst: etc/systemd/system/efistub-ucode-update@.path
    packages: [ efibootmgr, intel-ucode ]

  - src: bower_components/systemd-units/system/efistub-ucode-update@.service
    dst: etc/systemd/system/efistub-ucode-update@.service
    packages: [ efibootmgr, intel-ucode ]

  - src: bower_components/systemd-units/system/refind-update.path
    dst: etc/systemd/system/refind-update.path
    packages: [ refind-efi ]

  - src: bower_components/systemd-units/system/refind-update.service
    dst: etc/systemd/system/refind-update.service

  - src: bower_components/systemd-units/system/netctl-auto-resume@.service
    dst: etc/systemd/system/netctl-auto-resume@.service

  - src: etc/pacman.conf
    packages: [ pacman ]

  - src: etc/locale.gen
  - src: etc/locale.conf
  - src: etc/sysctl.d/99-sysctl.conf

  - src: etc/nftables.conf
    packages: [ nftables ]

  - src: etc/sudoers
    fmode: 0440
    packages: [ sudo ]

  - src: etc/ssh/sshd_config
    packages: [ openssh ]

  - src: etc/systemd/network/wired.network
    hosts: [ Mimir, Sleipnir ]

  - src: etc/systemd/journald.conf.d/size.conf
    hosts: [ Gungnir ]

  - src: etc/udev/rules.d/99-lowbat.rules
    hosts: [ Gungnir, Gungnir-x60 ]

  - src: etc/modules-load.d/virtualbox.conf
    pacman: [ virtualbox ]

  - src: etc/modprobe.d/alsa-base.conf
    packages: [ linux-samus4 ]

  - src: etc/X11/xorg.conf.d/10-monitor.conf
    hosts: [ Mimir ]

  - src: etc/X11/xorg.conf.d/15-dpms.conf

  - src: etc/X11/xorg.conf.d/20-intel.conf
    packages: [ xf86-video-intel ]

  - src: etc/X11/xorg.conf.d/10-keyboard.conf
    packages: [ xkeyboard-config-chromebook ]

  - src: etc/X11/xorg.conf.d/50-synaptics.conf
    packages: [ xf86-input-synaptics ]
    hosts: [ Gungnir ]

  - src: etc/X11/xorg.conf.d/50-mtrack.conf
    packages: [ xf86-input-mtrack-git ]
    hosts: [ Frigg ]

  - src: bower_components/systemd-units/logind.conf.d/acpi.conf
    dst: etc/systemd/logind.conf.d/acpi.conf

  - src: bower_components/systemd-units/coredump.conf.d/disable.conf
    dst: etc/systemd/coredump.conf.d/disable.conf

  - src: etc/systemd/system/chromeos-kbd_backlight.service
    packages: [ linux-samus4 ]

  - src: bower_components/systemd-units/system/numlock.service
    dst: etc/systemd/system/numlock.service

  - src: bower_components/systemd-units/system/xscreensaver-lock@.service
    dst: etc/systemd/system/xscreensaver-lock@.service
    packages: [ xscreensaver-arch-logo ]

  - src: etc/lightdm/lightdm.conf
    packages: [ lightdm ]

  - src: etc/lightdm/lightdm-gtk-greeter.conf
    packages: [ lightdm-gtk-greeter ]

  - src: bower_components/archrc-private/etc/samba/smb.conf
    dst: etc/samba/smb.conf
    packages: [ samba ]

  - src: bower_components/archrc-private/etc/samba/users.map
    dst: /etc/samba/users.map
    packages: [ samba ]

  - src: bower_components/archrc-private/etc/nginx/nginx.conf
    dst: etc/nginx/nginx.conf
    packages: [ nginx ]

  - src: bower_components/archutil/bin/archutil
    dst: usr/local/bin/archutil
    fmode: 0755

  - src: archutil.yml
    dst: usr/local/etc/archutil.yml

  - src: usr/local/bin/xcleanup
    fmode: 0755
    packages: [ lightdm ]

  - src: usr/local/bin/touchpad-toggle
    fmode: 0755
    packages: [ xf86-input-synaptics ]

  - src: usr/local/bin/chromeos-kbd_backlight
    fmode: 0755
    packages: [ linux-samus4 ]

  - src: usr/local/bin/chromeos-sound-output-toggle
    fmode: 0755
    packages: [ linux-samus4 ]

  # Only needed if starting xorg with systemd/User.
  # - src: etc/X11/Xwrapper.config
